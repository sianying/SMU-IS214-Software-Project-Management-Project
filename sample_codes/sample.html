<!DOCTYPE html>
<html lang ="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- VueJS -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>

</head>

<body>
    <div id ="app">
        <h3>Flask Drive: S3 Flask Demo</h3>
        <p>Welcome to this AWS S3 Demo</p>
        <div>
            <h3>Upload your file here:</h3>
            
            <input type=file name=file v-on:change="onUpload">
            <input type=submit value=Upload v-on:click="uploadFile()">

        </div>

    </div>

    <script>
        new Vue({
                el: '#app',
                data:{
                    file: "",
                },
                methods:{
                    onUpload(element){
                        var files = element.target.files || element.dataTransfer.files;
                        if (!files.length){
                            return;
                        }
                        this.file = files[0];
                        console.log(this.file)
                    },
                    uploadFile(){
                        var fd = new FormData();
                        fd.append("file", this.file)
                        fd.append("section_id", "bac93509-893e-49f8-8e49-8851d73e8a02")
                        const requestOptions ={
                            method: "POST",
                            body: fd
                        };
                        
                        fetch("http://127.0.0.1:5000/materials/file", requestOptions)
                            .then(response => response.json())
                            .then(data => (console.log(data)));
                    
                    }
                }
        });  

    </script>

    <!-- Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
</body>




</html>