<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- VueJS -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <!-- Navbar css-->
    <link rel="stylesheet" href="nav.css">
    <!-- Main css -->
    <link rel="stylesheet" href="courses.css">
    <!-- Iconify -->
    <script src="https://code.iconify.design/2/2.0.3/iconify.min.js"></script>
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#"  id="navlogo">ONE STOP LMS</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav">
                <a class="nav-link" href="./view-list-of-courses-HR.html">Home <span class="sr-only">(current)</span></a>
                <a class="nav-link active" href="#">All Courses</a>
                <a class="nav-link" href="#">My Courses</a>
            </div>
        </div>
        <a class="nav-link" href="#"><img src="../images/image_2021-09-29_17-14-02.png" id="profilelogo"></a>
    </nav>
</head>

<body>
    <div id="app" class="wrapper container mx-auto">
        <div id="breadcrumb">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-light">
                    <li class="breadcrumb-item"><a href="./view-list-of-courses-HR.html">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Add New Course</li>
                </ol>
            </nav>
        </div>

        <h4 class="pt-3 pl-2">1. Set Course Details</h4>
        <div class="form-border rounded">
            <form>
                <div class="form-group">
                    <label for="exampleFormControlInput1">Course Name</label><span class="form-error ml-2">{{ error.title }}</span>
                    <input class="form-control" placeholder="e.g. Introduction to Ink Installation" v-model="title" @input="validateCourseName">
                </div>
                <div class="form-group">
                    <label for="exampleFormControlInput1">Course Code</label><span class="form-error ml-2">{{ error.code }}</span>
                    <input class="form-control" placeholder="e.g. IC111" v-model="code"  @input="validateCourseCode">
                </div>
                <div class="form-group">
                    <label for="exampleFormControlTextarea1">Course Description</label><span class="form-error ml-2">{{ error.description }}</span>
                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="5" v-model="description"  @input="validateCourseDescription" placeholder="e.g. This course teaches the fundamentals of ink replacement procedures..."></textarea>
                </div>
                <div class="form-group">
                    <label for="exampleFormControlInput1">Pre-requisites</label><span v-if = "selected.length === 0" class="ml-2 form-notice">* Currently no pre-requisite courses are selected</span>
                    <select multiple v-model="selected" class="form-control">
                        <option value="">This course has no pre-requisites</option>
                        <option v-for="course in courses" :value="course.code">{{course.code}} {{ course.title }}</option>
                    </select>
                </div>
                <div class="d-flex justify-content-center">
                    <a class="btn btn-success mt-4" @click="onSubmit">Confirm</a>
                </div>
            </form>
        </div>
        <!-- :href='"./create-class-page-HR.html?course=" + course' -->

        <!-- <h4 class="pt-5 pl-2">2. Add a class</h4>
        <div class="border rounded d-flex justify-content-center">
            <button class="btn btn-outline-primary plus-button">
                <span class="iconify" style="width: 35px; height: auto;" data-icon="akar-icons:circle-plus"></span>
            </button>
        </div> -->

    </div>
    
<script>
    var app = new Vue({
        el: '#app',
        data: {
            title: "",
            code: "",
            description: "",
            selected: [],
            error: {
                title: "",
                code: "",
                description: ""
            },
            errorMessages: ["* Course name should be specified", "* Course code should be specified", "* Course description should be specified"],
            course: {},
            courses: [
                {
                    "title": "Printers and Inks fundamentals",
                    "code": "IC110",
                    "description": "This course focuses on ink replacement techniques. It teaches us how to be good ink replacement engineers.",
                },
                {
                    "title": "Printers fundamentals",
                    "code": "IC001",
                    "description": "Lorem ipsum dolor  libero perferendis sed distinctio voluptates dolores id cumque, eligendi culpa molestiae nostrum quos eos inventore ipsum at minus sit accusantium vel aliquid. Et, mollitia nihil unde est, deleniti cupiditate vitae fugiat voluptas id natus accusamus corrupti culpa nostrum odio, iusto beatae!",
                },
                {
                    "title": "Inks fundamentals",
                    "code": "IC002",
                    "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, libero perferendis sed distinctio voluptates dolores id cumque, eligendi culpa molestiae nostrum quos eos inventore ipsum at minus sit accusantium vel aliquid. Et, mollitia nihil unde est, deleniti cupiditate vitae fugiat voluptas id natus accusamus corrupti culpa nostrum odio, iusto beatae!",
                },
                {
                    "title": "Circuit basics",
                    "code": "IC003",
                    "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, libero perferendis sed distinctio voluptates dolores id cumque, eligendi culpa molestiae nostrum quos eos inventore ipsum at minus sit accusantium vel aliquid. Et, mollitia nihil unde est, deleniti cupiditate vitae fugiat voluptas id natus accusamus corrupti culpa nostrum odio, iusto beatae!",
                },
                {
                    "title": "Customer Service fundamentals",
                    "code": "IC005",
                    "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, libero perferendis sed distinctio voluptates dolores id cumque, eligendi culpa molestiae nostrum quos eos inventore ipsum at minus sit accusantium vel aliquid. Et, mollitia nihil unde est, deleniti cupiditate vitae fugiat voluptas id natus accusamus corrupti culpa nostrum odio, iusto beatae!",
                },
                {
                    "title": "Introduction to Time Management",
                    "code": "IC009",
                    "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, libero perferendis sed distinctio voluptates dolores id cumque, eligendi culpa molestiae nostrum quos eos inventore ipsum at minus sit accusantium vel aliquid. Et, mollitia nihil unde est, deleniti cupiditate vitae fugiat voluptas id natus accusamus corrupti culpa nostrum odio, iusto beatae!",
                },
            ],
        },
        methods: {
            onSubmit() {
                // 1. Validate form
                this.validateForm();
                if (this.title.length === 0 || this.code.length === 0 || this.description.length === 0) {
                    event.preventDefault();
                } else {
                // 2. Initialzie new course object and call create course API
                    const course = {
                        "title": this.title,
                        "code": this.code,
                        "description": this.description,
                        "prereq": this.selected
                    };
                // 3. Return 200, pass returned course id to next page
                    let para = new URLSearchParams();
                    para.append("id", course.code);
                    location.href = "./create-class-page-HR.html?" + para.toString();
                    event.preventDefault();
                }
            },
            validateForm() {
                if (this.title.length === 0) {
                    this.error.title = this.errorMessages[0];
                }
                if (this.code.length === 0) {
                    this.error.code = this.errorMessages[1];
                }
                if (this.description.length === 0) {
                    this.error.description = this.errorMessages[2];
                }
            },
            validateCourseName() {
                if (this.title.length === 0) {
                    this.error.title = this.errorMessages[0];
                } else {
                    this.error.title = "";
                }
            },
            validateCourseCode() {
                if (this.code.length === 0) {
                    this.error.code = this.errorMessages[1];
                } else {
                    this.error.code = "";
                }
            },
            validateCourseDescription() {
                if (this.description.length === 0) {
                    this.error.description = this.errorMessages[2];
                } else {
                    this.error.description = "";
                }
            },
        },

    })

</script>


<!-- Bootstrap -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
</body>
</html>